{"ast":null,"code":"import _classCallCheck from\"/Users/christy/Documents/cxxxxxn.github.io/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/christy/Documents/cxxxxxn.github.io/node_modules/@babel/runtime/helpers/esm/createClass\";import _createSuper from\"/Users/christy/Documents/cxxxxxn.github.io/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/Users/christy/Documents/cxxxxxn.github.io/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{Row,Col}from'react-flexbox-grid';import'./index.css';import Mnavbar from'./Mnavbar';import Markdown from'./Markdown';var NoteDetail=/*#__PURE__*/function(_Component){_inherits(NoteDetail,_Component);var _super=_createSuper(NoteDetail);function NoteDetail(props){var _this;_classCallCheck(this,NoteDetail);_this=_super.call(this,props);_this.winScroll=function(){var scrollTop=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;if(scrollTop>90){_this.setState(function(prevState){if(!prevState.navbarStick){return{navbarStick:true};}});}else if(scrollTop<90){_this.setState(function(prevState){if(prevState.navbarStick){return{navbarStick:false};}});}};_this.content=React.createRef();_this.state={content:\"\",navbarStick:false};return _this;}_createClass(NoteDetail,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;fetch(this.props.note.md).then(function(res){return res.text();}).then(function(text){return _this2.setState({content:text});});document.addEventListener('scroll',this.winScroll,false);}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){var _this3=this;if(prevProps.note.name!==this.props.note.name){fetch(this.props.note.md).then(function(res){return res.text();}).then(function(text){return _this3.setState({content:text});});}}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){document.removeEventListener('scroll',this.winScroll,false);}},{key:\"render\",// shouldComponentUpdate(nextProps, nextState){\n//     if(nextProps.note.name === this.props.note.name && nextState.md === this.state.md){\n//         return false;\n//     }\n//     return true;\n// }\nvalue:function render(){var content=this.state.content;if(content){var _this$props$note=this.props.note,title=_this$props$note.title,time=_this$props$note.time;var navbarClassName=\"article-navbar big-device \"+(this.state.navbarStick?\"article-navbar-stick\":null);return/*#__PURE__*/React.createElement(\"div\",{className:\"noteDetail\"},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{lg:3},/*#__PURE__*/React.createElement(\"div\",{className:navbarClassName},/*#__PURE__*/React.createElement(\"h3\",{className:\"article-navbar-title\"},\"\\u76EE \\u5F55\"),/*#__PURE__*/React.createElement(Mnavbar,{source:content}))),/*#__PURE__*/React.createElement(Col,{xs:12,lg:9,className:\"article\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"article-title\"},title),/*#__PURE__*/React.createElement(\"p\",{className:\"article-time\"},time),/*#__PURE__*/React.createElement(Markdown,{source:content}))));}else{return/*#__PURE__*/React.createElement(\"div\",null);}}}]);return NoteDetail;}(Component);export{NoteDetail as default};;","map":{"version":3,"sources":["/Users/christy/Documents/cxxxxxn.github.io/src/views/NoteDetail/index.js"],"names":["React","Component","Row","Col","Mnavbar","Markdown","NoteDetail","props","winScroll","scrollTop","window","pageYOffset","document","documentElement","body","setState","prevState","navbarStick","content","createRef","state","fetch","note","md","then","res","text","addEventListener","prevProps","name","removeEventListener","title","time","navbarClassName"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {Row, Col } from 'react-flexbox-grid';\nimport './index.css';\n\nimport Mnavbar from './Mnavbar';\nimport Markdown from './Markdown';\n\n\nexport default class NoteDetail extends Component {\n\n    constructor(props){\n        super(props);\n        this.content = React.createRef();\n        this.state = {\n            content:\"\",\n            navbarStick: false\n        };\n    }\n\n    componentDidMount() {\n        fetch(this.props.note.md)\n          .then(res => res.text())\n          .then(text => this.setState({content: text}));\n\n        document.addEventListener('scroll', this.winScroll, false);\n    }\n\n    componentDidUpdate(prevProps){\n        if(prevProps.note.name !== this.props.note.name){\n            fetch(this.props.note.md)\n                .then(res => res.text())\n                .then(text => this.setState({content: text}));\n        }\n    }\n\n    componentWillUnmount(){\n        document.removeEventListener('scroll', this.winScroll, false);\n    }\n\n    winScroll = ()=>{\n        const scrollTop =\n            window.pageYOffset ||\n            document.documentElement.scrollTop ||\n            document.body.scrollTop ||\n            0;\n\n        if(scrollTop > 90){\n            this.setState((prevState) => {\n                if(!prevState.navbarStick){\n                    return {\n                        navbarStick: true\n                    }\n                }\n            });\n        }else if(scrollTop < 90){\n            this.setState((prevState) => {\n                if(prevState.navbarStick){\n                    return {\n                        navbarStick: false\n                    }\n                }\n            });\n        }\n    }\n\n    // shouldComponentUpdate(nextProps, nextState){\n    //     if(nextProps.note.name === this.props.note.name && nextState.md === this.state.md){\n    //         return false;\n    //     }\n    //     return true;\n    // }\n    \n    render(){\n        const {content} = this.state;\n        if(content){\n            const {title, time} = this.props.note;\n            const navbarClassName =\"article-navbar big-device \" + (this.state.navbarStick?\"article-navbar-stick\":null)\n            return (\n                <div className=\"noteDetail\">\n                    <Row>\n                        <Col lg={3}>\n                            <div className={navbarClassName}>\n                                <h3 className=\"article-navbar-title\">目 录</h3>\n                                <Mnavbar source={content}></Mnavbar>\n                            </div>\n                        </Col>\n                        <Col xs={12} lg={9}\n                            className=\"article\">\n                            <h2 className=\"article-title\">{title}</h2>\n                            <p className=\"article-time\">{time}</p>\n                            <Markdown source={content}></Markdown>\n                        </Col>\n                    </Row>\n                </div>\n                );\n        }else{\n            return <div></div>\n        }\n    }\n};\n"]},"metadata":{},"sourceType":"module"}